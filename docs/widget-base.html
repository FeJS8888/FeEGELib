<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget åŸºç±» - FeEGELib API æ–‡æ¡£</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 40px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        nav {
            background: #2c3e50;
            padding: 15px 40px;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
            transition: opacity 0.3s;
        }
        
        nav a:hover {
            opacity: 0.7;
        }
        
        .content {
            padding: 40px;
        }
        
        h2 {
            color: #667eea;
            font-size: 2em;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        h3 {
            color: #555;
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        
        h4 {
            color: #666;
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .method {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .method-signature {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .param {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .param-name {
            color: #667eea;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
        
        .return {
            background: #e8f4f8;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        pre {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 20px 0;
            border: 1px solid #e9ecef;
        }
        
        code {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }
        
        th {
            background: #667eea;
            color: white;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .back-link {
            display: inline-block;
            margin-top: 30px;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .back-link:hover {
            background: #764ba2;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Widget åŸºç±»</h1>
            <p>æ‰€æœ‰å¯ç»˜åˆ¶æ§ä»¶çš„æŠ½è±¡åŸºç±»</p>
        </header>
        
        <nav>
            <a href="index.html">ğŸ“š è¿”å›é¦–é¡µ</a>
            <a href="#overview">æ¦‚è¿°</a>
            <a href="#methods">æ–¹æ³•</a>
            <a href="#members">æˆå‘˜å˜é‡</a>
            <a href="#usage">ä½¿ç”¨è¯´æ˜</a>
        </nav>
        
        <div class="content">
            <h2 id="overview">ğŸ“– æ¦‚è¿°</h2>
            <p>
                <code>Widget</code> ç±»æ˜¯ FeEGELib ä¸­æ‰€æœ‰å¯ç»˜åˆ¶ UI æ§ä»¶çš„æŠ½è±¡åŸºç±»ã€‚å®ƒå®šä¹‰äº†æ§ä»¶çš„åŸºæœ¬æ¥å£å’Œé€šç”¨å±æ€§ï¼Œ
                åŒ…æ‹¬äº‹ä»¶å¤„ç†ã€ç»˜åˆ¶å’Œä½ç½®ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
            </p>
            
            <div class="info">
                <strong>ğŸ“Œ æç¤ºï¼š</strong> Widget æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ã€‚æ‰€æœ‰å…·ä½“çš„æ§ä»¶ç±»ï¼ˆå¦‚ Buttonã€Panelã€InputBox ç­‰ï¼‰
                éƒ½ç»§æ‰¿è‡ª Widget ç±»ã€‚
            </div>
            
            <h3>ç±»å®šä¹‰</h3>
            <pre><code class="language-cpp">class Widget {
public:
    virtual ~Widget();
    virtual void handleEvent(const mouse_msg& msg) = 0;
    virtual void draw(PIMAGE dst, int offsetX, int offsetY) = 0;
    virtual void draw() = 0;
    virtual void setPosition(int x, int y) = 0;
    virtual void setScale(double s) = 0;
    
    double getWidth();
    double getHeight();
    
    bool is_global = true;
    
protected:
    int cx = 0, cy = 0;
    double width = 0, height = 0;
    double scale = 1;
};</code></pre>
            
            <h2 id="methods">ğŸ”§ å…¬å…±æ–¹æ³•</h2>
            
            <div class="method">
                <h3>è™šææ„å‡½æ•°</h3>
                <div class="method-signature">
                    virtual ~Widget();
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>è™šææ„å‡½æ•°ç¡®ä¿æ´¾ç”Ÿç±»å¯¹è±¡èƒ½å¤Ÿè¢«æ­£ç¡®ææ„ã€‚è‡ªåŠ¨ä»å…¨å±€ Widget é›†åˆå’Œ ID æ˜ å°„è¡¨ä¸­ç§»é™¤å½“å‰å¯¹è±¡ã€‚</p>
                
                <div class="warning">
                    <strong>âš ï¸ é‡è¦ï¼š</strong> Widget çš„ææ„ä¼šè‡ªåŠ¨æ¸…ç†å…¨å±€æ³¨å†Œè¡¨ä¸­çš„å¼•ç”¨ï¼Œç¡®ä¿ä¸ä¼šå‡ºç°æ‚¬ç©ºæŒ‡é’ˆã€‚
                </div>
            </div>
            
            <div class="method">
                <h3>handleEvent</h3>
                <div class="method-signature">
                    virtual void handleEvent(const mouse_msg& msg) = 0;
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>å¤„ç†é¼ æ ‡äº‹ä»¶çš„çº¯è™šå‡½æ•°ï¼Œæ‰€æœ‰æ´¾ç”Ÿç±»å¿…é¡»å®ç°æ­¤æ–¹æ³•ã€‚</p>
                
                <h4>å‚æ•°ï¼š</h4>
                <div class="param">
                    <span class="param-name">msg</span> - é¼ æ ‡æ¶ˆæ¯ç»“æ„ä½“ï¼ŒåŒ…å«é¼ æ ‡ä½ç½®å’ŒæŒ‰é”®çŠ¶æ€
                </div>
                
                <h4>ç¤ºä¾‹ï¼š</h4>
                <pre><code class="language-cpp">// åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°
void MyWidget::handleEvent(const mouse_msg& msg) {
    if (msg.is_left() && msg.is_down()) {
        // å¤„ç†é¼ æ ‡å·¦é”®æŒ‰ä¸‹äº‹ä»¶
    }
}</code></pre>
            </div>
            
            <div class="method">
                <h3>draw (å¸¦å‚æ•°)</h3>
                <div class="method-signature">
                    virtual void draw(PIMAGE dst, int offsetX, int offsetY) = 0;
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>å°†æ§ä»¶ç»˜åˆ¶åˆ°æŒ‡å®šçš„å›¾åƒä¸Šï¼Œåœ¨æŒ‡å®šçš„åç§»ä½ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯è™šå‡½æ•°ã€‚</p>
                
                <h4>å‚æ•°ï¼š</h4>
                <div class="param">
                    <span class="param-name">dst</span> - ç›®æ ‡å›¾åƒæŒ‡é’ˆï¼Œnullptr è¡¨ç¤ºç»˜åˆ¶åˆ°é»˜è®¤çª—å£
                </div>
                <div class="param">
                    <span class="param-name">offsetX</span> - æ§ä»¶ä¸­å¿ƒçš„ x åæ ‡ï¼ˆç›¸å¯¹äº dstï¼‰
                </div>
                <div class="param">
                    <span class="param-name">offsetY</span> - æ§ä»¶ä¸­å¿ƒçš„ y åæ ‡ï¼ˆç›¸å¯¹äº dstï¼‰
                </div>
            </div>
            
            <div class="method">
                <h3>draw (æ— å‚æ•°)</h3>
                <div class="method-signature">
                    virtual void draw() = 0;
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>å°†æ§ä»¶ç»˜åˆ¶åˆ°é»˜è®¤çª—å£çš„å½“å‰ä½ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯è™šå‡½æ•°ã€‚</p>
                
                <h4>ç¤ºä¾‹ï¼š</h4>
                <pre><code class="language-cpp">// åœ¨ä¸»å¾ªç¯ä¸­è°ƒç”¨
widget->draw();  // ç»˜åˆ¶æ§ä»¶åˆ°çª—å£</code></pre>
            </div>
            
            <div class="method">
                <h3>setPosition</h3>
                <div class="method-signature">
                    virtual void setPosition(int x, int y) = 0;
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>è®¾ç½®æ§ä»¶çš„ä½ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯è™šå‡½æ•°ã€‚</p>
                
                <h4>å‚æ•°ï¼š</h4>
                <div class="param">
                    <span class="param-name">x</span> - æ§ä»¶ä¸­å¿ƒçš„ x åæ ‡
                </div>
                <div class="param">
                    <span class="param-name">y</span> - æ§ä»¶ä¸­å¿ƒçš„ y åæ ‡
                </div>
                
                <h4>ç¤ºä¾‹ï¼š</h4>
                <pre><code class="language-cpp">widget->setPosition(400, 300);  // å°†æ§ä»¶ç§»åŠ¨åˆ° (400, 300)</code></pre>
            </div>
            
            <div class="method">
                <h3>setScale</h3>
                <div class="method-signature">
                    virtual void setScale(double s) = 0;
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>è®¾ç½®æ§ä»¶çš„ç¼©æ”¾æ¯”ä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯è™šå‡½æ•°ã€‚</p>
                
                <h4>å‚æ•°ï¼š</h4>
                <div class="param">
                    <span class="param-name">s</span> - ç¼©æ”¾æ¯”ä¾‹ï¼Œ1.0 è¡¨ç¤ºåŸå§‹å¤§å°ï¼Œ2.0 è¡¨ç¤ºæ”¾å¤§ä¸¤å€ï¼Œ0.5 è¡¨ç¤ºç¼©å°ä¸€åŠ
                </div>
                
                <h4>ç¤ºä¾‹ï¼š</h4>
                <pre><code class="language-cpp">widget->setScale(1.5);  // å°†æ§ä»¶æ”¾å¤§ 1.5 å€</code></pre>
            </div>
            
            <div class="method">
                <h3>getWidth</h3>
                <div class="method-signature">
                    double getWidth();
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>è·å–æ§ä»¶å½“å‰çš„å®½åº¦ï¼ˆå·²åº”ç”¨ç¼©æ”¾ï¼‰ã€‚</p>
                
                <div class="return">
                    <strong>è¿”å›å€¼ï¼š</strong> æ§ä»¶çš„å®½åº¦ï¼ˆåƒç´ ï¼‰
                </div>
                
                <h4>ç¤ºä¾‹ï¼š</h4>
                <pre><code class="language-cpp">double w = widget->getWidth();
std::cout << "æ§ä»¶å®½åº¦: " << w << std::endl;</code></pre>
            </div>
            
            <div class="method">
                <h3>getHeight</h3>
                <div class="method-signature">
                    double getHeight();
                </div>
                <p><strong>è¯´æ˜ï¼š</strong></p>
                <p>è·å–æ§ä»¶å½“å‰çš„é«˜åº¦ï¼ˆå·²åº”ç”¨ç¼©æ”¾ï¼‰ã€‚</p>
                
                <div class="return">
                    <strong>è¿”å›å€¼ï¼š</strong> æ§ä»¶çš„é«˜åº¦ï¼ˆåƒç´ ï¼‰
                </div>
            </div>
            
            <h2 id="members">ğŸ“¦ å…¬å…±æˆå‘˜å˜é‡</h2>
            
            <table>
                <thead>
                    <tr>
                        <th>æˆå‘˜</th>
                        <th>ç±»å‹</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>is_global</code></td>
                        <td>bool</td>
                        <td>æŒ‡ç¤ºæ§ä»¶æ˜¯å¦ä¸ºå…¨å±€æ§ä»¶ã€‚é»˜è®¤ä¸º trueã€‚å½“æ§ä»¶è¢«æ·»åŠ åˆ° Panel ç­‰å®¹å™¨æ—¶ï¼Œä¼šè¢«è®¾ç½®ä¸º falseã€‚</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>å—ä¿æŠ¤æˆå‘˜å˜é‡</h3>
            <table>
                <thead>
                    <tr>
                        <th>æˆå‘˜</th>
                        <th>ç±»å‹</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>cx, cy</code></td>
                        <td>int</td>
                        <td>æ§ä»¶ä¸­å¿ƒçš„ x å’Œ y åæ ‡</td>
                    </tr>
                    <tr>
                        <td><code>width, height</code></td>
                        <td>double</td>
                        <td>æ§ä»¶çš„å®½åº¦å’Œé«˜åº¦ï¼ˆå·²åº”ç”¨ç¼©æ”¾ï¼‰</td>
                    </tr>
                    <tr>
                        <td><code>scale</code></td>
                        <td>double</td>
                        <td>æ§ä»¶çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º 1.0</td>
                    </tr>
                </tbody>
            </table>
            
            <h2 id="usage">ğŸ’¡ ä½¿ç”¨è¯´æ˜</h2>
            
            <h3>å…¨å±€ Widget ç®¡ç†</h3>
            <p>FeEGELib æä¾›äº†å…¨å±€çš„ Widget ç®¡ç†æœºåˆ¶ï¼š</p>
            
            <pre><code class="language-cpp">// å…¨å±€ Widget é›†åˆ
extern std::set<Widget*> widgets;

// ID åˆ° Widget çš„æ˜ å°„
extern std::map<std::wstring, Widget*> IdToWidget;

// é€šè¿‡ ID è·å– Widget
Widget* getWidgetById(const std::wstring& identifier);</code></pre>
            
            <h4>ç¤ºä¾‹ï¼š</h4>
            <pre><code class="language-cpp">// é€šè¿‡ ID è·å– Widget
Widget* btn = getWidgetById(L"myButton");
if (btn != nullptr) {
    btn->setPosition(100, 100);
}

// éå†æ‰€æœ‰ Widget
for (Widget* widget : widgets) {
    widget->draw();
}</code></pre>
            
            <div class="warning">
                <strong>âš ï¸ æ³¨æ„ï¼š</strong> <code>getWidgetById</code> å¯èƒ½è¿”å› nullptrï¼Œä½¿ç”¨å‰è¯·åŠ¡å¿…æ£€æŸ¥ã€‚
            </div>
            
            <h3>ç”Ÿå‘½å‘¨æœŸç®¡ç†</h3>
            <p>Widget çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
            
            <ul style="margin-left: 30px; margin-top: 10px;">
                <li>ä½¿ç”¨ Builder ç±»åˆ›å»ºçš„ Widget ä¼šè‡ªåŠ¨æ³¨å†Œåˆ°å…¨å±€é›†åˆ</li>
                <li>Widget ææ„æ—¶ä¼šè‡ªåŠ¨ä»å…¨å±€é›†åˆä¸­ç§»é™¤</li>
                <li>å®¹å™¨ç±»ï¼ˆå¦‚ Panelï¼‰ä¸æ‹¥æœ‰å­ Widget çš„æ‰€æœ‰æƒ</li>
                <li>ç¨‹åºå‘˜éœ€è¦è´Ÿè´£ delete Widget å¯¹è±¡</li>
            </ul>
            
            <div class="note">
                <strong>ğŸ’¡ æœ€ä½³å®è·µï¼š</strong> å»ºè®®ä½¿ç”¨ Builder æ¨¡å¼åˆ›å»º Widgetï¼Œå¹¶åœ¨ç¨‹åºé€€å‡ºæ—¶ç»Ÿä¸€æ¸…ç†ã€‚
            </div>
            
            <h3>ç»§æ‰¿ Widget ç±»</h3>
            <p>å¦‚æœéœ€è¦åˆ›å»ºè‡ªå®šä¹‰æ§ä»¶ï¼Œå¯ä»¥ç»§æ‰¿ Widget ç±»å¹¶å®ç°æ‰€æœ‰çº¯è™šå‡½æ•°ï¼š</p>
            
            <pre><code class="language-cpp">class MyCustomWidget : public Widget {
public:
    MyCustomWidget(int x, int y, double w, double h) {
        cx = x;
        cy = y;
        width = w;
        height = h;
    }
    
    void handleEvent(const mouse_msg& msg) override {
        // å®ç°äº‹ä»¶å¤„ç†é€»è¾‘
    }
    
    void draw(PIMAGE dst, int x, int y) override {
        // å®ç°ç»˜åˆ¶é€»è¾‘
    }
    
    void draw() override {
        draw(nullptr, cx, cy);
    }
    
    void setPosition(int x, int y) override {
        cx = x;
        cy = y;
    }
    
    void setScale(double s) override {
        scale = s;
        width = originalWidth * s;
        height = originalHeight * s;
    }
    
private:
    double originalWidth, originalHeight;
};</code></pre>
            
            <h2>ç›¸å…³é“¾æ¥</h2>
            <ul style="margin-left: 30px; margin-top: 10px;">
                <li><a href="panel.html">Panel - é¢æ¿å®¹å™¨</a></li>
                <li><a href="button.html">Button - æŒ‰é’®æ§ä»¶</a></li>
                <li><a href="builders.html">Builder ç±» - æ„å»ºå™¨æ¨¡å¼</a></li>
            </ul>
            
            <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        </div>
    </div>
    
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
