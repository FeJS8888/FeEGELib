<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¢°æ’æ£€æµ‹ç³»ç»Ÿ - FeEGELib API æ–‡æ¡£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .content {
            padding: 40px;
        }
        
        .back-link {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            margin-bottom: 20px;
        }
        
        .back-link:hover {
            background: #764ba2;
        }
        
        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        h3 {
            color: #764ba2;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .method {
            background: white;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        
        .method-signature {
            font-family: "Consolas", "Monaco", monospace;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .param {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .param-name {
            color: #667eea;
            font-weight: bold;
        }
        
        .example {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .example code {
            font-family: "Consolas", "Monaco", monospace;
            font-size: 0.9em;
        }
        
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .info {
            background: #d1ecf1;
            border-left: 4px solid #0c5460;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .algorithm-box {
            background: #e7f3ff;
            border: 2px solid #2196F3;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .algorithm-box h4 {
            color: #2196F3;
            margin-bottom: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background: #667eea;
            color: white;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .toc ul {
            list-style-position: inside;
            line-height: 2;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’¥ ç¢°æ’æ£€æµ‹ç³»ç»Ÿ</h1>
            <p>åŸºäº GJK/EPA ç®—æ³•çš„é«˜ç²¾åº¦ç¢°æ’æ£€æµ‹</p>
        </header>
        
        <div class="content">
            <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
            
            <div class="section">
                <h2>ğŸ“– æ¦‚è¿°</h2>
                <p>
                    FeEGELib æä¾›äº†å®Œæ•´çš„ç¢°æ’æ£€æµ‹ç³»ç»Ÿï¼Œæ”¯æŒä¸¤ç§æ£€æµ‹æ¨¡å¼ï¼š
                </p>
                <ol style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>åƒç´ çº§ç¢°æ’æ£€æµ‹</strong>ï¼šåŸºäºå›¾åƒåƒç´ çš„é‡å æ£€æµ‹ï¼Œé€‚ç”¨äºç®€å•åœºæ™¯</li>
                    <li><strong>GJK/EPA ç¢°æ’æ£€æµ‹</strong>ï¼šåŸºäºå‡¸å¤šè¾¹å½¢çš„ç²¾ç¡®ç¢°æ’æ£€æµ‹ï¼Œæ”¯æŒå¤æ‚å½¢çŠ¶å’Œç‰©ç†æ¨¡æ‹Ÿ</li>
                </ol>
                <p style="margin-top: 10px;">
                    è¯¥ç³»ç»Ÿå®ç°äº†å·¥ä¸šçº§çš„ GJKï¼ˆGilbert-Johnson-Keerthiï¼‰ç®—æ³•ç”¨äºç¢°æ’æ£€æµ‹ï¼Œ
                    ä»¥åŠ EPAï¼ˆExpanding Polytope Algorithmï¼‰ç®—æ³•ç”¨äºç©¿é€æ·±åº¦è®¡ç®—ã€‚
                </p>
            </div>
            
            <div class="toc">
                <h3>ç›®å½•</h3>
                <ul>
                    <li><a href="#pixel-collision">åƒç´ ç¢°æ’æ£€æµ‹</a></li>
                    <li><a href="#gjk-collision">GJK/EPA ç¢°æ’æ£€æµ‹</a></li>
                    <li><a href="#api-reference">API å‚è€ƒ</a></li>
                    <li><a href="#transform">å˜æ¢å‡½æ•°</a></li>
                    <li><a href="#utils">å®ç”¨å·¥å…·</a></li>
                    <li><a href="#examples">ä½¿ç”¨ç¤ºä¾‹</a></li>
                    <li><a href="#algorithm">ç®—æ³•åŸç†</a></li>
                </ul>
            </div>
            
            <h2 id="pixel-collision">ğŸ¨ åƒç´ ç¢°æ’æ£€æµ‹</h2>
            
            <div class="section">
                <h3>å·¥ä½œåŸç†</h3>
                <p>
                    åƒç´ ç¢°æ’æ£€æµ‹æ˜¯ Element çš„é»˜è®¤ç¢°æ’æ£€æµ‹æ¨¡å¼ã€‚å®ƒé€šè¿‡æ£€æµ‹ä¸¤ä¸ªå…ƒç´ çš„åƒç´ æ˜¯å¦æœ‰é‡å æ¥åˆ¤æ–­ç¢°æ’ã€‚
                </p>
                
                <h4>ä¼˜ç‚¹ï¼š</h4>
                <ul style="margin-left: 20px;">
                    <li>å®ç°ç®€å•ï¼Œæ— éœ€é¢å¤–é…ç½®</li>
                    <li>å¯¹ä»»æ„å½¢çŠ¶éƒ½æœ‰æ•ˆ</li>
                    <li>é€‚åˆå›¾åƒè¾¹ç•Œä¸è§„åˆ™çš„æƒ…å†µ</li>
                </ul>
                
                <h4>ç¼ºç‚¹ï¼š</h4>
                <ul style="margin-left: 20px;">
                    <li>æ€§èƒ½è¾ƒä½ï¼Œéœ€è¦éå†åƒç´ </li>
                    <li>æ— æ³•è·å–ç¢°æ’æ–¹å‘å’Œæ·±åº¦ä¿¡æ¯</li>
                    <li>ä¸é€‚åˆå¤§é‡å…ƒç´ çš„ç¢°æ’æ£€æµ‹</li>
                </ul>
            </div>
            
            <div class="method">
                <h3>ä½¿ç”¨æ–¹æ³•</h3>
                
                <div class="example">
                    <code>
// åˆ›å»ºä¸¤ä¸ªå…ƒç´ ï¼ˆé»˜è®¤ä½¿ç”¨åƒç´ ç¢°æ’ï¼‰<br>
Element* player = newElement("player", "./player.png", 100, 100);<br>
Element* enemy = newElement("enemy", "./enemy.png", 120, 120);<br>
<br>
// æ£€æµ‹ç¢°æ’<br>
if (player->isTouchedBy(enemy)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;cout << "å‘ç”Ÿç¢°æ’ï¼" << endl;<br>
}
                    </code>
                </div>
            </div>
            
            <h2 id="gjk-collision">âš¡ GJK/EPA ç¢°æ’æ£€æµ‹</h2>
            
            <div class="section">
                <h3>å·¥ä½œåŸç†</h3>
                <p>
                    GJK/EPA æ˜¯ä¸€ç§åŸºäºå‡¸å¤šè¾¹å½¢çš„é«˜æ•ˆç¢°æ’æ£€æµ‹ç®—æ³•ã€‚å®ƒä½¿ç”¨æ•°å­¦æ–¹æ³•è®¡ç®—ä¸¤ä¸ªå‡¸å¤šè¾¹å½¢æ˜¯å¦ç›¸äº¤ï¼Œ
                    ä»¥åŠç›¸äº¤æ—¶çš„ç©¿é€æ·±åº¦å’Œæ–¹å‘ã€‚
                </p>
                
                <h4>ä¼˜ç‚¹ï¼š</h4>
                <ul style="margin-left: 20px;">
                    <li>æ€§èƒ½ä¼˜ç§€ï¼Œé€‚åˆå¤§é‡å¯¹è±¡çš„ç¢°æ’æ£€æµ‹</li>
                    <li>æä¾›ç²¾ç¡®çš„ç¢°æ’ä¿¡æ¯ï¼ˆæ–¹å‘ã€æ·±åº¦ï¼‰</li>
                    <li>æ”¯æŒç‰©ç†æ¨¡æ‹Ÿå’Œç¢°æ’å“åº”</li>
                    <li>ç‹¬ç«‹äºå›¾åƒå¤§å°å’Œæ—‹è½¬è§’åº¦</li>
                </ul>
                
                <h4>é™åˆ¶ï¼š</h4>
                <ul style="margin-left: 20px;">
                    <li>åªæ”¯æŒå‡¸å¤šè¾¹å½¢</li>
                    <li>éœ€è¦æ‰‹åŠ¨å®šä¹‰ç¢°æ’å½¢çŠ¶</li>
                    <li>å¤æ‚å½¢çŠ¶éœ€è¦åˆ†è§£ä¸ºå¤šä¸ªå‡¸å¤šè¾¹å½¢</li>
                </ul>
            </div>
            
            <div class="algorithm-box">
                <h4>ğŸ” GJK ç®—æ³•ç®€ä»‹</h4>
                <p>
                    GJKï¼ˆGilbert-Johnson-Keerthiï¼‰ç®—æ³•é€šè¿‡æ„å»º Minkowski å·®é›†æ¥åˆ¤æ–­ä¸¤ä¸ªå‡¸å½¢çŠ¶æ˜¯å¦ç›¸äº¤ã€‚
                    å¦‚æœå·®é›†åŒ…å«åŸç‚¹ï¼Œåˆ™ä¸¤ä¸ªå½¢çŠ¶å‘ç”Ÿç¢°æ’ã€‚
                </p>
                <p style="margin-top: 10px;">
                    <strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong>O(n)ï¼Œå…¶ä¸­ n æ˜¯å¤šè¾¹å½¢é¡¶ç‚¹æ•°<br>
                    <strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>O(1)
                </p>
            </div>
            
            <div class="algorithm-box">
                <h4>ğŸ“ EPA ç®—æ³•ç®€ä»‹</h4>
                <p>
                    EPAï¼ˆExpanding Polytope Algorithmï¼‰ç®—æ³•åœ¨ GJK æ£€æµ‹åˆ°ç¢°æ’åï¼Œ
                    é€šè¿‡æ‰©å±•å•çº¯å½¢æ¥è®¡ç®—ç²¾ç¡®çš„ç©¿é€æ·±åº¦å’Œç¢°æ’æ³•çº¿æ–¹å‘ã€‚
                </p>
                <p style="margin-top: 10px;">
                    è¿™å¯¹äºç‰©ç†æ¨¡æ‹Ÿå’Œç¢°æ’å“åº”è‡³å…³é‡è¦ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—ç‰©ä½“åº”è¯¥å¦‚ä½•åˆ†ç¦»ã€‚
                </p>
            </div>
            
            <div class="method">
                <h3>å¯ç”¨ GJK ç¢°æ’æ£€æµ‹</h3>
                
                <div class="example">
                    <code>
// åˆ›å»ºå…ƒç´ <br>
Element* box = newElement("box", "./box.png", 200, 200);<br>
<br>
// å¯ç”¨ GJK ç¢°æ’æ£€æµ‹<br>
box->useGJK();<br>
<br>
// å®šä¹‰çŸ©å½¢ç¢°æ’æ¡†ï¼ˆç›¸å¯¹äºå›¾åƒä¸­å¿ƒï¼‰<br>
vector&lt;Position&gt; rect = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;{-50, -50}, {50, -50}, {50, 50}, {-50, 50}<br>
};<br>
box->addPolygon(rect);<br>
<br>
// ç°åœ¨å¯ä»¥ä½¿ç”¨é«˜æ•ˆçš„ç¢°æ’æ£€æµ‹<br>
if (box->isTouchedBy(otherBox)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;// è·å–ç¢°æ’ä¿¡æ¯<br>
&nbsp;&nbsp;&nbsp;&nbsp;PenetrationInfo info = getLastInfo();<br>
&nbsp;&nbsp;&nbsp;&nbsp;cout << "ç©¿é€æ·±åº¦: " << info.depth << endl;<br>
}
                    </code>
                </div>
            </div>
            
            <h2 id="api-reference">ğŸ“š API å‚è€ƒ</h2>
            
            <div class="method">
                <h3>isTouched</h3>
                <p>æ£€æµ‹ä¸¤ä¸ªå‡¸å¤šè¾¹å½¢æ˜¯å¦å‘ç”Ÿç¢°æ’ã€‚</p>
                
                <div class="method-signature">
bool isTouched(const vector&lt;Position&gt;& shapeA, const vector&lt;Position&gt;& shapeB);
                </div>
                
                <div class="param">
                    <span class="param-name">shapeA</span> - ç¬¬ä¸€ä¸ªå¤šè¾¹å½¢çš„é¡¶ç‚¹é›†åˆ<br>
                    <span class="param-name">shapeB</span> - ç¬¬äºŒä¸ªå¤šè¾¹å½¢çš„é¡¶ç‚¹é›†åˆ<br>
                    <span class="param-name">è¿”å›å€¼</span> - æ˜¯å¦å‘ç”Ÿç¢°æ’
                </div>
                
                <div class="note">
                    <strong>æ³¨æ„ï¼š</strong>å¦‚æœå‘ç”Ÿç¢°æ’ï¼Œå¯ä»¥é€šè¿‡ <code>getLastInfo()</code> è·å–è¯¦ç»†çš„ç¢°æ’ä¿¡æ¯ã€‚
                </div>
                
                <div class="example">
                    <code>
vector&lt;Position&gt; boxA = {{0,0}, {100,0}, {100,100}, {0,100}};<br>
vector&lt;Position&gt; boxB = {{50,50}, {150,50}, {150,150}, {50,150}};<br>
<br>
if (isTouched(boxA, boxB)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;cout << "ä¸¤ä¸ªæ–¹å—å‘ç”Ÿç¢°æ’ï¼" << endl;<br>
}
                    </code>
                </div>
            </div>
            
            <div class="method">
                <h3>getLastInfo</h3>
                <p>è·å–æœ€åä¸€æ¬¡ç¢°æ’æ£€æµ‹çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
                
                <div class="method-signature">
const PenetrationInfo& getLastInfo();
                </div>
                
                <div class="param">
                    <span class="param-name">è¿”å›å€¼</span> - PenetrationInfo ç»“æ„ä½“ï¼ŒåŒ…å«ï¼š
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li><code>direction</code> - ç¢°æ’æ³•çº¿æ–¹å‘ï¼ˆå•ä½å‘é‡ï¼‰</li>
                        <li><code>depth</code> - ç©¿é€æ·±åº¦</li>
                    </ul>
                </div>
                
                <div class="example">
                    <code>
if (isTouched(shapeA, shapeB)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;PenetrationInfo info = getLastInfo();<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;// è®¡ç®—åˆ†ç¦»å‘é‡<br>
&nbsp;&nbsp;&nbsp;&nbsp;Position separation = info.direction * info.depth;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;// å°†ç‰©ä½“ A æ²¿ç¢°æ’æ³•çº¿ç§»å‡º<br>
&nbsp;&nbsp;&nbsp;&nbsp;elementA->moveTo(elementA->getPosition() + separation);<br>
}
                    </code>
                </div>
            </div>
            
            <div class="method">
                <h3>getSeparateDistance</h3>
                <p>è®¡ç®—ä¸¤ä¸ªç¢°æ’å½¢çŠ¶åœ¨æŒ‡å®šæ–¹å‘ä¸Šçš„åˆ†ç¦»è·ç¦»ã€‚</p>
                
                <div class="method-signature">
double getSeparateDistance(const vector&lt;Position&gt;& shapeA, 
                          const vector&lt;Position&gt;& shapeB,
                          const Position& direction);
                </div>
                
                <div class="param">
                    <span class="param-name">shapeA, shapeB</span> - ä¸¤ä¸ªç¢°æ’å½¢çŠ¶<br>
                    <span class="param-name">direction</span> - æ£€æµ‹æ–¹å‘ï¼ˆå•ä½å‘é‡ï¼‰<br>
                    <span class="param-name">è¿”å›å€¼</span> - åœ¨æŒ‡å®šæ–¹å‘ä¸Šçš„åˆ†ç¦»è·ç¦»
                </div>
                
                <div class="note">
                    <strong>ç”¨é€”ï¼š</strong>æ­¤å‡½æ•°å¸¸ç”¨äºç‰©ç†æ¨¡æ‹Ÿä¸­çš„ç¢°æ’å“åº”ï¼Œå¯ä»¥è®¡ç®—ç‰©ä½“éœ€è¦ç§»åŠ¨å¤šè¿œæ‰èƒ½å®Œå…¨åˆ†ç¦»ã€‚
                </div>
            </div>
            
            <div class="method">
                <h3>getSafeDistance</h3>
                <p>ä¼°ç®—ä¸¤ä¸ªå½¢çŠ¶åœ¨æŒ‡å®šæ–¹å‘ä¸Šçš„å®‰å…¨ç§»åŠ¨è·ç¦»ã€‚</p>
                
                <div class="method-signature">
double getSafeDistance(const vector&lt;Position&gt;& shapeA,
                      const vector&lt;Position&gt;& shapeB,
                      const Position& direction);
                </div>
                
                <div class="param">
                    <span class="param-name">shapeA, shapeB</span> - ä¸¤ä¸ªå½¢çŠ¶<br>
                    <span class="param-name">direction</span> - ç§»åŠ¨æ–¹å‘ï¼ˆå•ä½å‘é‡ï¼‰<br>
                    <span class="param-name">è¿”å›å€¼</span> - å¯ä»¥å®‰å…¨ç§»åŠ¨çš„è·ç¦»ä¼°è®¡å€¼
                </div>
                
                <div class="info">
                    <strong>è¯´æ˜ï¼š</strong>
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>å½“å½¢çŠ¶æœªæ¥è§¦æ—¶ï¼Œè¿”å›æ­£å€¼ï¼Œè¡¨ç¤ºæœ€å°é—´è·çš„ä¼°è®¡</li>
                        <li>å½“å½¢çŠ¶æ¥è§¦æˆ–ç©¿é€æ—¶ï¼Œè¿”å›å€¼å¯èƒ½ä¸º 0 æˆ–è´Ÿæ•°</li>
                        <li>æ­¤å€¼ä¸ç­‰ä»·äºå®é™…ç©¿é€æ·±åº¦ï¼Œå¦‚éœ€çœŸå®ç©¿é€æ·±åº¦è¯·ä½¿ç”¨ <code>getLastInfo()</code></li>
                        <li>å¸¸ç”¨äºç§»åŠ¨é¢„æµ‹ä¸­çš„å¿«é€Ÿé—´è·ä¼°è®¡</li>
                    </ul>
                </div>
                
                <div class="example">
                    <code>
// é¢„æµ‹ç§»åŠ¨æ˜¯å¦å®‰å…¨<br>
Position moveDir = Position{1, 0};  // å‘å³ç§»åŠ¨<br>
double safeDist = getSafeDistance(playerShape, wallShape, moveDir);<br>
<br>
if (safeDist > 5) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;player->moveRight(5);  // å®‰å…¨ï¼Œå¯ä»¥ç§»åŠ¨<br>
} else {<br>
&nbsp;&nbsp;&nbsp;&nbsp;player->moveRight(safeDist);  // åªç§»åŠ¨åˆ°å®‰å…¨è·ç¦»<br>
}
                    </code>
                </div>
            </div>
            
            <h2 id="transform">ğŸ”„ å˜æ¢å‡½æ•°</h2>
            
            <div class="method">
                <h3>transformShape</h3>
                <p>å¯¹å¤šè¾¹å½¢è¿›è¡Œç¼©æ”¾å’Œæ—‹è½¬å˜æ¢ã€‚</p>
                
                <div class="method-signature">
vector&lt;Position&gt; transformShape(const vector&lt;Position&gt;& shape, 
                                 double scale,
                                 const Position& rotationOrigin,
                                 double rotationAngle);
                </div>
                
                <div class="param">
                    <span class="param-name">shape</span> - åŸå§‹å¤šè¾¹å½¢é¡¶ç‚¹é›†åˆ<br>
                    <span class="param-name">scale</span> - ç¼©æ”¾æ¯”ä¾‹ï¼ˆ1.0 ä¸ºåŸå§‹å¤§å°ï¼‰<br>
                    <span class="param-name">rotationOrigin</span> - æ—‹è½¬ä¸­å¿ƒç‚¹<br>
                    <span class="param-name">rotationAngle</span> - æ—‹è½¬è§’åº¦ï¼ˆå¼§åº¦åˆ¶ï¼‰<br>
                    <span class="param-name">è¿”å›å€¼</span> - å˜æ¢åçš„å¤šè¾¹å½¢
                </div>
                
                <div class="note">
                    <strong>æ³¨æ„ï¼š</strong>å˜æ¢é¡ºåºä¸ºå…ˆç¼©æ”¾åæ—‹è½¬ã€‚
                </div>
            </div>
            
            <div class="method">
                <h3>transformPosition</h3>
                <p>å¯¹å¤šè¾¹å½¢è¿›è¡Œä½ç½®å¹³ç§»å˜æ¢ã€‚</p>
                
                <div class="method-signature">
vector&lt;Position&gt; transformPosition(const vector&lt;Position&gt;& shape,
                                    const Position& origin,
                                    const Position& pos);
                </div>
                
                <div class="param">
                    <span class="param-name">shape</span> - åŸå§‹å¤šè¾¹å½¢é¡¶ç‚¹é›†åˆ<br>
                    <span class="param-name">origin</span> - å±€éƒ¨åæ ‡ç³»åŸç‚¹<br>
                    <span class="param-name">pos</span> - ç›®æ ‡ä¸–ç•Œåæ ‡<br>
                    <span class="param-name">è¿”å›å€¼</span> - å¹³ç§»åçš„å¤šè¾¹å½¢
                </div>
                
                <div class="info">
                    <strong>å·¥ä½œæµç¨‹ï¼š</strong>
                    <ol style="margin-left: 20px; margin-top: 5px;">
                        <li>å°†å¤šè¾¹å½¢é¡¶ç‚¹è½¬æ¢ä¸ºç›¸å¯¹äº origin çš„å±€éƒ¨åæ ‡</li>
                        <li>å°†å±€éƒ¨åæ ‡å¹³ç§»åˆ°ç›®æ ‡ pos ä½ç½®</li>
                        <li>ä¿æŒå¤šè¾¹å½¢çš„å½¢çŠ¶å’Œæ–¹å‘ä¸å˜</li>
                    </ol>
                </div>
            </div>
            
            <h2 id="utils">ğŸ› ï¸ å®ç”¨å·¥å…·</h2>
            
            <div class="method">
                <h3>isPointInConvexPolygon</h3>
                <p>åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å‡¸å¤šè¾¹å½¢å†…ã€‚</p>
                
                <div class="method-signature">
bool isPointInConvexPolygon(const vector&lt;Position&gt;& polygon, const Position& point);
                </div>
                
                <div class="param">
                    <span class="param-name">polygon</span> - å‡¸å¤šè¾¹å½¢é¡¶ç‚¹é›†åˆï¼ˆæŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆæ’åˆ—ï¼‰<br>
                    <span class="param-name">point</span> - è¦æ£€æµ‹çš„ç‚¹åæ ‡<br>
                    <span class="param-name">è¿”å›å€¼</span> - ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…æˆ–è¾¹ä¸Š
                </div>
                
                <div class="example">
                    <code>
// æ£€æµ‹é¼ æ ‡æ˜¯å¦åœ¨å¤šè¾¹å½¢æŒ‰é’®å†…<br>
vector&lt;Position&gt; buttonShape = {{100,100}, {200,100}, {200,150}, {100,150}};<br>
Position mousePos = getMousePos();<br>
<br>
if (isPointInConvexPolygon(buttonShape, mousePos)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;cout << "é¼ æ ‡åœ¨æŒ‰é’®ä¸Šï¼" << endl;<br>
}
                    </code>
                </div>
            </div>
            
            <div class="method">
                <h3>readPolygonFromJSON</h3>
                <p>ä» JSON æ–‡ä»¶è¯»å–å¤šè¾¹å½¢æ•°æ®ã€‚</p>
                
                <div class="method-signature">
vector&lt;Position&gt; readPolygonFromJSON(const string& file, const string& id);
                </div>
                
                <div class="param">
                    <span class="param-name">file</span> - JSON æ–‡ä»¶è·¯å¾„<br>
                    <span class="param-name">id</span> - å¤šè¾¹å½¢ ID æ ‡è¯†<br>
                    <span class="param-name">è¿”å›å€¼</span> - å¤šè¾¹å½¢é¡¶ç‚¹é›†åˆ
                </div>
                
                <div class="example">
                    <code>
// JSON æ–‡ä»¶æ ¼å¼ç¤ºä¾‹ (shapes.json):<br>
{<br>
&nbsp;&nbsp;"FeEGE": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"point": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"player": [[0, 0], [50, 0], [50, 80], [0, 80]],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"enemy": [[0, 0], [40, 20], [40, 60], [0, 40]]<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;}<br>
}<br>
<br>
// è¯»å–å¤šè¾¹å½¢<br>
auto playerShape = readPolygonFromJSON("./shapes.json", "player");<br>
element->addPolygon(playerShape);
                    </code>
                </div>
            </div>
            
            <h2 id="examples">ğŸ“‹ å®Œæ•´ç¤ºä¾‹</h2>
            
            <h3>ç¤ºä¾‹ 1ï¼šåŸºç¡€ç¢°æ’æ£€æµ‹</h3>
            <div class="example">
                <code>
#include "FeEGELib.h"<br>
using namespace FeEGE;<br>
<br>
int main() {<br>
&nbsp;&nbsp;&nbsp;&nbsp;init(800, 600);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;// åˆ›å»ºç©å®¶<br>
&nbsp;&nbsp;&nbsp;&nbsp;Element* player = newElement("player", "./player.png", 100, 300);<br>
&nbsp;&nbsp;&nbsp;&nbsp;player->useGJK();<br>
&nbsp;&nbsp;&nbsp;&nbsp;vector&lt;Position&gt; playerBox = {{-25,-25}, {25,-25}, {25,25}, {-25,25}};<br>
&nbsp;&nbsp;&nbsp;&nbsp;player->addPolygon(playerBox);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;// åˆ›å»ºå¢™<br>
&nbsp;&nbsp;&nbsp;&nbsp;Element* wall = newElement("wall", "./wall.png", 400, 300);<br>
&nbsp;&nbsp;&nbsp;&nbsp;wall->useGJK();<br>
&nbsp;&nbsp;&nbsp;&nbsp;vector&lt;Position&gt; wallBox = {{-50,-100}, {50,-100}, {50,100}, {-50,100}};<br>
&nbsp;&nbsp;&nbsp;&nbsp;wall->addPolygon(wallBox);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;// ç§»åŠ¨æ§åˆ¶<br>
&nbsp;&nbsp;&nbsp;&nbsp;player->listen(EventType.frame, "move", [](Element* self) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (getkey('D')) self->moveRight(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (getkey('A')) self->moveLeft(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ç¢°æ’æ£€æµ‹<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element* wall = getElementById("wall");<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (self->isTouchedBy(wall)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self->cancelMove();  // å–æ¶ˆç§»åŠ¨<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;});<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;start();<br>
&nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>
}
                </code>
            </div>
            
            <h3>ç¤ºä¾‹ 2ï¼šç‰©ç†ç¢°æ’å“åº”</h3>
            <div class="example">
                <code>
// åˆ›å»ºä¸¤ä¸ªå¯ç¢°æ’çš„ç‰©ä½“<br>
Element* boxA = newElement("boxA", "./box.png", 200, 200);<br>
Element* boxB = newElement("boxB", "./box.png", 250, 200);<br>
<br>
// é…ç½®ç¢°æ’å½¢çŠ¶<br>
vector&lt;Position&gt; shape = {{-30,-30}, {30,-30}, {30,30}, {-30,30}};<br>
boxA->useGJK();<br>
boxA->addPolygon(shape);<br>
boxB->useGJK();<br>
boxB->addPolygon(shape);<br>
<br>
// ç¢°æ’å“åº”<br>
boxA->listen(EventType.frame, "collision_response", [](Element* self) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;Element* other = getElementById("boxB");<br>
&nbsp;&nbsp;&nbsp;&nbsp;if (self->isTouchedBy(other)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// è·å–ç¢°æ’ä¿¡æ¯<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PenetrationInfo info = getLastInfo();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// è®¡ç®—åˆ†ç¦»å‘é‡<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position separation = info.direction * info.depth;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ä¸¤ä¸ªç‰©ä½“å„ç§»åŠ¨ä¸€åŠè·ç¦»<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self->moveTo(self->getPosition() + separation * 0.5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other->moveTo(other->getPosition() - separation * 0.5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
});
                </code>
            </div>
            
            <h3>ç¤ºä¾‹ 3ï¼šå®‰å…¨ç§»åŠ¨</h3>
            <div class="example">
                <code>
// ä½¿ç”¨ moveSafely å®ç°è‡ªåŠ¨é¿éšœ<br>
Element* player = newElement("player", "./player.png", 100, 100);<br>
player->useGJK();<br>
player->addPolygon({{-20,-20}, {20,-20}, {20,20}, {-20,20}});<br>
<br>
// åˆ›å»ºéšœç¢ç‰©åˆ—è¡¨<br>
vector&lt;Element*&gt; obstacles;<br>
obstacles.push_back(wall1);<br>
obstacles.push_back(wall2);<br>
obstacles.push_back(wall3);<br>
<br>
// å®‰å…¨ç§»åŠ¨<br>
player->listen(EventType.frame, "safe_move", [&obstacles](Element* self) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;Position moveDir = {0, 0};<br>
&nbsp;&nbsp;&nbsp;&nbsp;if (getkey('W')) moveDir.y -= 5;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if (getkey('S')) moveDir.y += 5;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if (getkey('A')) moveDir.x -= 5;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if (getkey('D')) moveDir.x += 5;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if (moveDir.length() > 0) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// è‡ªåŠ¨å¤„ç†ç¢°æ’ï¼Œè¿”å›å®é™…ç§»åŠ¨è·ç¦»<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double actualDist = self->moveSafely(moveDir, obstacles);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
});
                </code>
            </div>
            
            <h2 id="algorithm">ğŸ§® ç®—æ³•åŸç†è¯¦è§£</h2>
            
            <div class="section">
                <h3>GJK ç®—æ³•åŸç†</h3>
                <p>
                    GJK ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯æ„å»ºä¸¤ä¸ªå½¢çŠ¶çš„ Minkowski å·®é›†ã€‚
                    å¦‚æœè¿™ä¸ªå·®é›†åŒ…å«åŸç‚¹ï¼Œåˆ™ä¸¤ä¸ªå½¢çŠ¶å¿…ç„¶ç›¸äº¤ã€‚
                </p>
                
                <h4>å…³é”®æ¦‚å¿µï¼š</h4>
                <ol style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>Support å‡½æ•°</strong>ï¼šåœ¨ç»™å®šæ–¹å‘ä¸Šæ‰¾åˆ°å½¢çŠ¶æœ€è¿œçš„ç‚¹</li>
                    <li><strong>Minkowski å·®</strong>ï¼šå½¢çŠ¶ A å’Œå½¢çŠ¶ B çš„å·®é›†</li>
                    <li><strong>Simplex</strong>ï¼šç”¨äºé€¼è¿‘å·®é›†çš„ç®€å•å¤šè¾¹å½¢</li>
                </ol>
                
                <h4>ç®—æ³•æ­¥éª¤ï¼š</h4>
                <ol style="margin-left: 20px; margin-top: 10px;">
                    <li>é€‰æ‹©ä¸€ä¸ªåˆå§‹æ–¹å‘ï¼Œè®¡ç®— support ç‚¹</li>
                    <li>ä½¿ç”¨ simplex åŒ…å›´åŸç‚¹</li>
                    <li>å¦‚æœ simplex åŒ…å«åŸç‚¹ï¼Œè¿”å›ç¢°æ’</li>
                    <li>å¦åˆ™ï¼Œæ›´æ–°æœç´¢æ–¹å‘ï¼Œç»§ç»­è¿­ä»£</li>
                </ol>
            </div>
            
            <div class="section">
                <h3>EPA ç®—æ³•åŸç†</h3>
                <p>
                    EPA ç®—æ³•åœ¨ GJK æ£€æµ‹åˆ°ç¢°æ’åè¿è¡Œï¼Œç”¨äºè®¡ç®—ç²¾ç¡®çš„ç©¿é€æ·±åº¦å’Œæ–¹å‘ã€‚
                </p>
                
                <h4>ç®—æ³•æ­¥éª¤ï¼š</h4>
                <ol style="margin-left: 20px; margin-top: 10px;">
                    <li>ä» GJK çš„ simplex å¼€å§‹</li>
                    <li>æ‰¾åˆ°è·ç¦»åŸç‚¹æœ€è¿‘çš„è¾¹</li>
                    <li>åœ¨è¯¥è¾¹çš„æ³•çº¿æ–¹å‘ä¸Šæ·»åŠ æ–°çš„ support ç‚¹</li>
                    <li>é‡å¤ç›´åˆ°æ‰¾åˆ°æœ€å°ç©¿é€æ·±åº¦</li>
                </ol>
                
                <h4>è¾“å‡ºä¿¡æ¯ï¼š</h4>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>direction</strong>ï¼šç¢°æ’æ³•çº¿æ–¹å‘ï¼ˆæŒ‡å‘å½¢çŠ¶ Aï¼‰</li>
                    <li><strong>depth</strong>ï¼šç©¿é€æ·±åº¦ï¼ˆéœ€è¦ç§»åŠ¨çš„è·ç¦»ï¼‰</li>
                </ul>
            </div>
            
            <div class="section">
                <h3>æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
                <ul style="margin-left: 20px;">
                    <li>ä½¿ç”¨ç®€å•çš„å¤šè¾¹å½¢ï¼ˆé¡¶ç‚¹æ•° â‰¤ 8ï¼‰ä»¥è·å¾—æœ€ä½³æ€§èƒ½</li>
                    <li>å¯¹äºå¤æ‚å½¢çŠ¶ï¼Œå°†å…¶åˆ†è§£ä¸ºå¤šä¸ªå‡¸å¤šè¾¹å½¢</li>
                    <li>ä½¿ç”¨ç©ºé—´åˆ†å‰²ï¼ˆå¦‚å››å‰æ ‘ï¼‰å‡å°‘ç¢°æ’æ£€æµ‹æ¬¡æ•°</li>
                    <li>åªå¯¹éœ€è¦ç²¾ç¡®ç¢°æ’çš„å¯¹è±¡å¯ç”¨ GJK</li>
                    <li>é™æ€å¯¹è±¡çš„ç¢°æ’å½¢çŠ¶å¯ä»¥é¢„è®¡ç®—å’Œç¼“å­˜</li>
                </ul>
            </div>
            
            <div class="warning">
                <h3>âš ï¸ å¸¸è§é—®é¢˜</h3>
                <ul style="margin-left: 20px;">
                    <li><strong>å¤šè¾¹å½¢å¿…é¡»æ˜¯å‡¸çš„</strong>ï¼šå‡¹å¤šè¾¹å½¢éœ€è¦åˆ†è§£ä¸ºå¤šä¸ªå‡¸å¤šè¾¹å½¢</li>
                    <li><strong>é¡¶ç‚¹é¡ºåº</strong>ï¼šé¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆéƒ½å¯ä»¥ï¼Œä½†è¦ä¿æŒä¸€è‡´</li>
                    <li><strong>åæ ‡ç³»</strong>ï¼šå¤šè¾¹å½¢åæ ‡æ˜¯ç›¸å¯¹äºå…ƒç´ ä¸­å¿ƒçš„å±€éƒ¨åæ ‡</li>
                    <li><strong>æ€§èƒ½</strong>ï¼šé¿å…åœ¨å•å¸§å†…è¿›è¡Œå¤§é‡ç¢°æ’æ£€æµ‹</li>
                </ul>
            </div>
            
            <div style="margin-top: 40px; text-align: center;">
                <a href="element.html" class="back-link">â† Element ç±»æ–‡æ¡£</a>
                <a href="index.html" class="back-link" style="margin-left: 10px;">è¿”å›é¦–é¡µ</a>
            </div>
        </div>
    </div>
</body>
</html>
